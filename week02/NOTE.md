# 本周总结

本周主要是学习了状态机的原理和实现，实现http请求和response的解析。其中在http请求和response解析这里遇到过一点小问题，无论怎么和老师的代码比对总是报错400。server这里请教了公司的nodejs工程师，他说你可以用postman来测试一下你写的server；client这里主要是通过debugger找到应该是toString有点问题，然后再和老师讲的报文的格式作比对，一点点试出来的。


# Notes

## 有限状态机
- 每一个状态都是一个机器

所有机器接受的输入是一致的
状态机的每一个机器本身没有状态，用函数表示则为纯函数（无副作用）


- 每一个机器知道下一个状态是什么

经典的状态机理论有两种状态机

   1. Moore状态机：它的每个机器都有确定的下一个状态，不管接受什么样的输入
   2. Mealy状态机：每个机器根据输入决定下一个状态，用的更多



## HTTP请求
### TCP与IP基础知识

- 流

TCP的数据传输概念像水流一样，没有明显的分割单位，只保证前后顺序是正确的

- 端口

网卡的数据哪一个是分配给哪一个软件的由端口决定

- 数据包

TCP的传输概念就是一个一个数据包的概念

- IP地址

IP地址可以帮包找到应该从哪到哪

- libnet

负责构造IP包并且发送

- libpcap

负责从网卡抓所有流经你网卡的IP包


### HTTP

- 一个request对应一个response

如果不是这个对应关系说明出错了

- 文本型协议

与二进制协议相对，所有的内容都是字符串，用Unicode/ASCII编码的值来传输

- request
   - `headers["Content-Type"]` 是一个必要的字段，必须有默认值
   - body是key-value格式
   - 不同的 `headers["Content-Type"]` 影响body的格式
- response
   - 0是body的结尾





